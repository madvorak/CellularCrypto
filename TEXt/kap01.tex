%%% Kapitola obecnì o celulárních automatech.

\chapter{Celulární automaty}

\section{Co jsou to celulární automaty}

Celulární automat (CA) je diskrétní model, kterı se skládá z pravidelné møíky bunìk. Buòky se nacházejí v urèitıch stavech, pøièem mnoina stavù a pravidla pro pøechod mezi stavy jsou spoleèná pro celı automat. CA se vyvíjí diskrétnì v èase (celı najednou). Pøíklady vıvoje konkrétních automatù naleznete na následujících stránkách.

Specialitou CA je to, e i velmi jednoduchá sada pravidel mùe vést k velmi komplexnímu chování. Celulární automaty našly vyuití jako modely v biologii, chemii, fyzice, ale také tøeba jako nástroj pøi procedurálním generování terénu pro poèítaèové hry.

Budeme uvaovat rùzné varianty CA podle následujících kritérií:
\begin{itemize}
\item Poèet dimenzí: Jsou všechny buòky v jedné øadì (1D), nebo ve ètvercové møíce (2D), èi krychlovì uspoøádané (3D)?
\item Poèet stavù: Pro mnoho aplikací staèí pouívat binární CA, kde se kadá buòka mùe nacházet ve stavu 0, nebo ve stavu 1. Jindy se ale uvauje mnohem více stavù (napøíklad pøi zkoumání tzv. self-replicating machines).
\item Okolí: Uvnitø CA jsou všechna pravidla lokální, co znamená e pøechodová funkce pro buòku závisí jen na stavu jejím a nìkolika bunìk v okolí. Toto okolí mùe mít rùznı poèet bunìk a rùznı tvar.
\item Typ pravidla: Pravidlo mùe kadé uspoøádané n-tici stavù bunìk v okolí pøiøadit novı stav buòky. Nebo mùe mít pravidlo jednodušší podobu, napøíklad jen posèítat stavy bunìk v okolí a nerozlišovat jejich rozmístìní.
\item Speciální údaje: Existují také varianty CA, které v buòkách ukládají navíc urèité speciální údaje. Napøíklad by nás mohl zajímat CA, ve kterém jsou nìkteré buòky zmrazeny (a nevyvíjejí se) a jiné se vyvíjejí (pøièem podle pøechodového pravidla mohou rozmrazit sousedy èi naopak zmrazit samy sebe). Dalším speciálním údajem mùe bıt pamì. Kromì souèasného stavu mùe bıt v buòce zapamatován také její pøedchozí stav a ten mùe bıt vyuit v pøechodové funkci. Pokud se jedná o binární CA s pamìtí pøedchozího stavu, lze ho bez újmy na obecnosti odsimulovat na normálním CA bez pamìti, kterı má 4 stavy. A v pøípadì 1D automatu lze ještì tento 4-stavovı automat simulovat na binárním automatu, kterı ale pouívá vìtší okolí a více bunìk celkovì, viz \citep{W02}, strana 655. 
\end{itemize}

\section{Elementární celulární automaty}

Wofram popisuje na poèátku své rozsáhlé práce \citep{W02} nejprve elementární celulární automaty, kterıch existuje 256. Elementární CA obsahuje jednoduchou øadu bunìk (jednorozmìrnou), kde se kadá buòka mùe nacházet ve 2 monıch stavech. Stav 0 oznaème bílou barvou a mluvme o dané buòce jako o mrtvé. Stav 1 oznaème èernou barvou a mluvme o dané buòce jako o ivé. U elementárních CA kadı novı stav kadé buòky závisí pouze na jejím stavu a stavu pøímıch sousedù. Pokud pøechodovou funkci nazveme $f$, èas (poèet uplynulıch krokù) oznaèíme $t$ a buòky automatu reprezentuje vektor x (napøíklad 5. buòka v poèáteèním stavu je reprezentovaná hodnotou $x_5(0)$), tak mùeme pøechod formálnì zapsat jako:
$$x_i(t+1) = f(x_{i-1}(t), x_i(t), x_{i+1}(t))$$, kde
$$f:\{0,1\}^3 \rightarrow \{0,1\} $$, tudí existuje $2^{2^3} = 2^8 =256$ takovıch funkcí $f$.

Elementární automaty èíslujeme tak, e pravidlo zapsané jako osmice bitù (kde první bit je obraz (1, 1, 1) a poslední bit je obraz (0, 0, 0), øadí se lexikograficky) pøevedeme do dvojkové soustavy.

Ukáeme si teï nìkolik elementárních automatù, na které se budeme v práci odkazovat. Zakreslíme vdy jejich vıvoj v èase, kde èas roste smìrem dolù, pøièem poèáteèní konfigurace se skládá se samıch nul (bílıch / mrtvıch bunìk) s jedinou jednièkou (èernou / ivou buòkou) uprostøed. Na níe uvedenıch obrázcích tedy jednotlivé øádky odpovídají stavùm celého automatu a pøi pøechodu na následující øádek pod ním se provede jeden krok vıpoètu. Lze si všimnout, e budeme vyuívat jen automaty se sudımi èísly. Ty s lichımi èísly toti zobrazují (0, 0, 0) na 1 a hned v prvním kroku zaplní neomezené mnoství bunìk.

V knize \citep{Schiff08} je na stranì 70 popsána klasifikace celulárních automatù do 4 tøíd, inspirovaná knihou \citep{W02}. Pøíkladem CA s úplnì jednotvárnım chováním (Class I) je elementární automat èíslo 220 (viz \ref{ca220}). Podobnì jednotvárné chování vykazuje automat èíslo 94 (viz \ref{ca94}). Zajímavìjší je automat èíslo 90, kterı opakuje stejné vzory (Class II) a dokonce generuje fraktální tvary (viz \ref{ca90}). Jeho pravidlo se dá popsat tak, e ignoruje souèasnı stav buòky a jako novı stav buòka nastaví xor mezi stavy levého a pravého souseda. Automat èíslo 30 vykazuje chaotické (pseudonáhodné) chování (Class III, viz \ref{ca30}). A nakonec si prohlédneme automat èíslo 110 (viz \ref{ca110}), kterı vykazuje urèité lokální struktury, které spolu mohou sloitì interagovat (Class IV).

\newcommand{\obrazek}[1]{\begin{figure}
\centering
\includegraphics[width=150mm, height=80mm]{ca#1.png}
\includegraphics[width=100mm, height=12mm]{ruleicon#1.png}
\caption{Elementární automat èíslo #1}
\label{ca#1}
\end{figure}}

\obrazek{220}
\obrazek{94}
\obrazek{90}
\obrazek{30}
\obrazek{110}

\section{Jednorozmìrné celulární automaty}

Elementární automaty byly pøíkladem 1D binárního automatu. Ale lze uvaovat i jiné jednorozmìrné automaty. Mùeme ponechat to, e veškerá data se nacházejí v jednorozmìrné møíce bunìk, ale uèinit následující úpravy:
\begin{itemize}
\item Nemusíme se omezovat jen na tìsné sousedy.
\item Mùeme povolit více ne 2 stavy.
\item Vıznamnım druhem celulárních automatù jsou totalistické automaty. Nehledì na to, jak velké se pouívá okolí a kolik stavù buòky nabıvají, v totalistickıch automatech se pouze èíselnì posèítají hodnoty všech bunìk v okolí (vèetnì buòky samé) a podle souètu hodnot se pøiøadí vısledná hodnota. Pøechodová funkce pro totalistickı automat s okolím velikosti $o$ a poètem stavù $s$ se tedy dá vyjádøit jako:
$$f:\{0,..,(s-1)(o+1)\} \rightarrow \{0,..,s-1\}$$
\end{itemize}

\section{Dvourozmìrné celulární automaty}

Buòky taky mùeme umístit do pravidelné dvojrozmìrné møíky, která vypadá jako ètvereèkovanı papír. Pokud vıvoj buòky závisí jen na stavu buòky tìsnì pod ní, buòky tìsnì nad ní, buòky tìsnì vpravo od ní a buòky tìsnì vlevo od ní, nazıváme takovı CA jako automat se 4-okolím. Pokud pøechodová funkce vyuívá i diagonálnì sousedící buòky, nazıváme takovı CA jako automat s 8-okolím. V oblasti 2D celulárních automatù se pouívají hlavnì totalistické automaty, protoe reprezentování jinıch typù pravidel by bylo pøíliš sloité. Typickıch pøíkladem totalistického 2D automatu je Game Of Life. To je dvourozmìrnı automat nad binární abecedou pouívající 8-okolí, kterı se øídí pravidlem, e ivá buòka pøeívá, pokud má 2 a 3 ivé sousedy (jinak umírá), zatímco mrtvá buòka obije, pokud má právì 3 ivé sousedy. Game Of Life se stal zdrojem  mnoha rùznıch høíèek. Nicménì pro úèely šifrování se nezdá bıt moc uiteènı, protoe se chová pøíliš \uv{pravidelnì} a po mnoha provedenıch krocích mívá velké oblasti bez jakékoliv ivé buòky.

Lepší jsou pro nás CA, která se chovají více \uv{chaoticky}. Mezi totalistickımi 2D automaty je to napøíklad automat jménem Amoeba Universe \citep{MCELL}, v nìm ivá buòka pøeívá, má-li 1, 3, 5 èi 8 ivıch sousedù a mrtvá buòka obije, pokud má 3, 5, èi 7 ivıch sousedù. Pokud se na tento automat bude dívat èlovìk, neuvidí zøejmì nic pozoruhodného (na rozdíl od Game Of Life), ale statistické vlastnosti se ukázaly bıt slušné.

\begin{figure}
\centering
\includegraphics[width=80mm, height=80mm]{replicator.png}
\caption{Replicator Universe po 8 krocích}
\label{replicator}
\end{figure}

Poslední dvourozmìrnı automat, kterı lze v programu získat pøímo pod urèitım jménem, je Replicator Universe. Ten má veselé pravidlo, které zapomíná pùvodní stav buòky a její novı stav je 1 právì tehdy, kdy má 1, 3, 5 èi 7 ivıch sousedù, viz \citep{Schiff08}, strana 116. V této práci je uveden jen pro zajímavost. Jakákoliv poèáteèní konfigurace je toti po urèitém poètu krokù zkopírovaná do všech 8 smìrù od poèátku (jako tøeba ta, co je na obrázku \ref{replicator}). A proè se tak vùbec chová? Jeho pøechodová funkce je vlastnì XOR sousedù a je to tak lineární zobrazení nad $\mathbb{Z}_2$. Proto i po jakémkoliv poètu krokù tento CA stále definuje lineární zobrazení mezi poèáteèním stavem a novım stavem. Díky linearitì mùeme prozkoumat zvláš, jaké všechny buòky budou ovlivnìny jednou ivou buòkou. Vısledek pak vznikne XORováním tìchto vısledkù pro všechny ivé buòky na vstupu (jako kdyby se kadá buòka vstupu vyvíjela zcela samostatnì). Pøi hraní s jedinou ivou buòkou na vstupu je u snadnìjší nahlédnout, proè vdy po provedení $2^n$ krokù je ivá buòka nakopírována do všech 8 stran s velkımi mezerami od jiné (všechny ve vzdálenosti $n$ od poèáteèního místa, a u \uv{rovnì} èi \uv{šikmo}).

\section{Implementace celulárních automatù}

V teorii se typicky uvaují celulární automaty na nekoneèném høišti. V poèáteèním stavu se však všechny nenulové hodnoty vyskytují jen uvnitø nìjaké koneèné oblasti bunìk. Nenulové hodnoty se pak ale mohou neomezenì rozrùstat do všech stran. Rychlost tohoto rozšiøování lze shora omezit na základì velikosti okolí aplikovaného pravidla.

V praxi implementujeme celı automat na koneèném høišti. Monosti jsou dvì. Buï celı automat zacyklíme a jeho vıvoj v èase \uv{pokresluje nekoneènou válcovou plochu}, nebo automat na stranách ohranièíme a pøi aplikaci pravidel na okraji høištì èteme nulové hodnoty za jeho okrajem.

Vıhodou je snadná implementace a nízké pamìové nároky. Nevıhodou je, e se vıvoj celého automatu periodicky opakuje, pokud provedeme dostateènı poèet krokù. Délku této periody lze bohuel odhadnout pouze shora.